<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Family recipe from Grandma's Kitchen">
  <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
  <meta name="googlebot" content="noindex, nofollow">
  <title>Recipe - Grandma's Kitchen</title>
  <link rel="stylesheet" href="styles.min.css">
</head>
<body>
  <!-- Authentication Gate -->
  <div id="auth-gate" class="auth-gate">
    <div class="auth-container">
      <h1>Grandma's Kitchen</h1>
      <p>This is a private family recipe archive.</p>
      <form id="auth-form">
        <label for="auth-answer">What is Grandma's last name?</label>
        <input type="text" id="auth-answer" autocomplete="off" required>
        <button type="submit" class="btn btn-primary">Enter</button>
        <p id="auth-error" class="auth-error" style="display: none;">Incorrect. Please try again.</p>
      </form>
    </div>
  </div>

  <div id="site-content" style="display: none;">
  <header class="site-header">
    <div class="container">
      <h1><a href="index.html">Grandma's Kitchen</a></h1>
      <p class="tagline" style="font-size: 0.9rem; opacity: 0.8;">Soli Deo Gloria</p>
    </div>
  </header>

  <nav class="site-nav">
    <div class="container">
      <ul>
        <li><a href="index.html">All Recipes</a></li>
        <li><a href="index.html#letter-A">Recipe Index</a></li>
      </ul>
    </div>
  </nav>

  <main>
    <div class="container">
      <div class="content">
        <!-- Back link -->
        <p style="margin-bottom: 1.5rem;">
          <a href="index.html">&larr; Back to All Recipes</a>
        </p>

        <!-- Recipe content populated by JavaScript -->
        <div id="recipe-content">
          <div class="text-center" style="padding: 3rem;">
            <p>Loading recipe...</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>Grandma's Kitchen &middot; A Family Treasure</p>
      <p style="margin-top: 0.5rem; font-size: 0.8rem;">From Michigan to Florida &middot; Preserved with Love</p>
    </div>
  </footer>
  </div><!-- end site-content -->

  <!-- Milk Substitution Tool (for cheesemaking recipes) -->
  <script src="milk-substitution.js"></script>
  <script>
    // Authentication gate
    (function() {
      const AUTH_KEY = 'grandmas-kitchen-auth';
      const CORRECT_ANSWER = 'Baker';

      function checkAuth() {
        return localStorage.getItem(AUTH_KEY) === 'true';
      }

      function showSite() {
        document.getElementById('auth-gate').style.display = 'none';
        document.getElementById('site-content').style.display = 'block';
      }

      function showGate() {
        document.getElementById('auth-gate').style.display = 'flex';
        document.getElementById('site-content').style.display = 'none';
      }

      // Check on load
      if (checkAuth()) {
        showSite();
      } else {
        showGate();
      }

      // Handle form submission
      document.getElementById('auth-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const answer = document.getElementById('auth-answer').value;
        if (answer === CORRECT_ANSWER) {
          localStorage.setItem(AUTH_KEY, 'true');
          showSite();
        } else {
          document.getElementById('auth-error').style.display = 'block';
          document.getElementById('auth-answer').value = '';
          document.getElementById('auth-answer').focus();
        }
      });
    })();
  </script>
  <script src="script.min.js"></script>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('[App] Service worker registered:', registration.scope);
          })
          .catch((error) => {
            console.log('[App] Service worker registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>
